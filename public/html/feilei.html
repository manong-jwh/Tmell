<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>网易严选居家生活篇 - 品质爆款、双11定金购、抑菌防螨，健康居家、秋冬换季，精品上新、居家达人， 收纳巧思、经典北欧风</title>
    <link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/feilei.css">
    <script src="../jquery-3.5.1.js"></script>
</head>

<body>
    <!-- 共用 -->
    <header id="header">
        <nav>
            <div class="content">
                <div class="nav-left l">
                    <img src="../images/laba.gif" alt="">
                    <a href="#">关于防止近期不法分子冒充客服实施诈骗的公告</a>
                </div>
                <ul class="r">
                    <li><a href="#">登录/注册</a></li>
                    <li><a href="#">我的订单</a></li>
                    <li><a href="#">会员</a></li>
                    <li><a href="#">甄选家</a></li>
                    <li class="qycg"><a href="#">企业采购<i class="icon"></i></a>
                        <div class="three">
                            <i></i>
                            <a href="#">企业购</a>
                            <a href="#">礼品卡</a>
                            <a href="#">联系我们</a>
                        </div>
                    </li>
                    <li class="khfw"><a href="#">客户服务<i class="icon"></i></a>
                        <div class="four">
                            <i></i>
                            <a href="#">在线客服</a>
                            <a href="#">帮助中心</a>
                            <a href="#">商务合作</a>
                            <a href="#">开放平台</a>
                        </div>
                    </li>
                    <li class="app"><a href="#"><i></i>APP</a>
                        <div class="down">
                            <i></i><img src="" alt="">
                            <p>下载领大额新人红包</p>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>

        <div class="header-btm">
            <h1>
                <a href="#"></a>
            </h1>
            <div class="gou">
                <div class="gwc"><i></i><span>购物车</span><i>0</i></div>
            </div>
            <div class="search">
                <i></i><input type="text" placeholder="9.9元超值区">
                <button class="btn">搜索</button>
                <div class="word"><a href="#">新人首单0元购</a><a href="#">iPhone12</a><a href="#">每周二88折</a><a href="#">口罩</a></div>
            </div>

            <div class="hidden" style="position: static;top: 0;width: 100%;
            left: 0;background-color:#fff">
                <div class="quan" style="width: 1090px;margin: 0 auto;">
                    <ul class="nav-side">
                        <li><a href="/public/index.html">首页</a></li>
                        <li class="jjsh"><a class="nav-active" href="/public/html/feilei.html">居家生活</a>
                            <div class="a">
                                <div class="jj">
                                    <div id="jj" style="width:124px; margin-right: 24px;">
                                        <p>口碑好物</p>
                                    </div>
                                    <div id="cs" style="width:124px; margin-right: 24px;">
                                        <p>床上用品</p>
                                    </div>
                                    <div id="jz" style="width:124px; margin-right: 24px;">
                                        <p>家具家装</p>
                                    </div>
                                    <div id="sn" style="width:124px; margin-right: 24px;">
                                        <p>收纳日用</p>
                                    </div>
                                    <div id="sp" style="width:124px; margin-right: 24px;">
                                        <p>家居饰品</p>
                                    </div>
                                    <div id="cf" style="width:124px; margin-right: 24px;">
                                        <p>厨房用品</p>
                                    </div>
                                    <div id="cj" style="width:124px; margin-right: 24px;">
                                        <p>厨具水具</p>
                                    </div>
                                    <div id="cw" style="width:124px;">
                                        <p>宠物生活</p>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li><a href="#">服饰鞋包</a></li>
                        <li><a href="#">美食酒水</a></li>
                        <li><a href="#">个护清洁</a></li>
                        <li><a href="#">母婴亲子</a></li>
                        <li><a href="#">运动旅行</a></li>
                        <li><a href="#">数码家电</a></li>
                        <li><a href="#">严选全球</a></li>
                        <li></li>
                        <li><a href="#">为你严选</a></li>
                        <li><a href="#">众筹</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>
    <div class="m-crumbs " id="j-yx-crumbs">
        <a href="/public/index.html">首页</a>
        <span>></span>
        <span>居家生活</span>
    </div>
    <div class="banner">

        <ol>
            <li class="banner-active"></li>
            <li></li>
            <li></li>

        </ol>

    </div>







    <ul class="aside-left" style="top:392px">
        <li>
            <span>- 热销榜 -</span>
        </li>
        <li>
            <img src="../images/left-1.png" alt=""><span>全站<br>热销榜</span>
        </li>
        <li>
            <img src="../images/left-2.png" alt=""><span>居家<br>生活榜</span>
        </li>
        <li>
            <img src="../images/left-3.png" alt=""><span>服饰<br>鞋包榜</span>
        </li>
        <li>
            <img src="../images/left-4.png" alt=""><span>美食<br>酒水榜</span>
        </li>
        <li>
            <img src="../images/left-5.png" alt=""><span>数码<br>家电榜</span>
        </li>
        <li>
            <img src="../images/left-6.png" alt=""><span>个护<br>清洁榜</span>
        </li>
        <li>
            <img src="../images/left-7.png" alt=""><span>运动<br>旅行榜</span></a>
        </li>
        <li>
            <img src="../images/left-8.png" alt=""><span>母婴<br>亲子榜</span>
        </li>
        <li>
            <img src="../images/left-9.png" alt=""><span>全球<br>特色榜</span>
        </li>
    </ul>
    <div class="aside-right" style="top:392px">
        <a href="#">
            <p>扫码领</p>
            <p>APP大额</p>
            <p>新人红包</p>
        </a>
        <a href="#"><span></span>在线客服</a>

        <a style="display: none;" href="#header"><span class="gotop"></span>回到顶部</a>

    </div>



    <script src="../js/nav-main.js" type="module">

    </script>
    <script>
        let $lis = $('.banner li');
        let $asRig = $('.aside-right')

        let num = 0;
        let $imgs = '';
        $.post('http://localhost:3000/index/index', (res) => {
            let data = JSON.parse(res.list)
            downLoad(data.down);
            bannerImg(data.jjBanner);
            $imgs = $('.banner img');

            bannerActive($lis, $imgs);

            erji(data.nav.jj)
            newShang(data.man)
            mHover($('main section'));
            pjMes(data.ping)
            pjImg($('.sec section'))
        })

        function pjMes(ping) {
            let str = '';
            $.each(ping, function(i, item) {
                if (item.pl == '') {
                    item.pl = '未及时评价，默认好评';
                }
                let name = item.name
                name = name.replace(name.slice(1, -1), function(i, v, a) {
                    var s = ''
                    for (var j = 0, len = i.length; j < len; j++) {
                        s += '*'
                    }
                    return s
                });

                str += `<li>
                    <div>
                        <img src="${item.img}" title="${item.sName}" alt="">
                        <div>
                            <div><span>${name}</span><span>${item.time}</span></div>
                            <div><span>${item.sName}</span><span>${item.price}</span></div>
                            <div><span>${item.pl}</span></div>
                        </div>
                    </div>
                </li>`
            })
            $('.sec section').html(str)
        }

        function pjImg(elme) {

            let old = '';
            let img = ''
            elme.on('mouseenter', 'li', function() {
                img = $(this).find('img')
                old = img.css('transform', 'scale(1.2)')
            })
            elme.on('mouseleave', 'li', function() {

                img.css('transform', 'scale(1)')
            })
        }

        function newShang(man) {
            let str = '';
            $.each(man, function(i, item) {
                str += `<li>
                <img src="${item.img}" data-src="${item.imghover}" alt="">
                <p>${item.ys}</p>
                <div>
                    <p>${item.tap}</p>
                    <p>${item.tbp}</p>
                </div>
                <p>${item.num}</p>
                <span>${item.sum}</span>
            </li>`
            })
            $('main section').html(str)

        }

        function mHover(elem) {
            let yuan = "";
            elem.on('mouseover', 'li', function() {
                let $ser = $(this).children('img');
                yuan = $ser.attr('src');
                let str = $ser.attr('data-src');
                $ser.attr('src', str);
            })
            elem.on('mouseout', 'li', function() {
                $(this).children('img').attr('src', yuan)
                return false
            })
        }

        function erji(nav) {
            let str = '';
            let a = '';
            let b = '';
            let c = '';
            let d = '';
            let e = '';
            let f = '';
            let g = '';


            $.each(nav, function(i, item) {

                switch (item.type) {
                    case '口碑好物':
                        str += `
                                        <div class="xianga">
                                            <img width="50" src="${item.img}" alt="">
                                            <span>${item.name}</span></div>
                                            `
                        break;
                    case '床上用品':
                        a += `
                                        <div class="xianga">
                                            <img width="50" src="${item.img}" alt="">
                                            <span>${item.name}</span></div>
                                            `
                        break;
                    case '家具家装':
                        b += `
                                        <div class="xianga">
                                            <img width="50" src="${item.img}" alt="">
                                            <span>${item.name}</span></div>
                                            `
                        break;

                    case '收纳日用':
                        c += `
                                        <div class="xianga">
                                            <img width="50" src="${item.img}" alt="">
                                            <span>${item.name}</span></div>
                                            `
                        break;
                    case '家居饰品':
                        d += `
                                        <div class="xianga">
                                            <img width="50" src="${item.img}" alt="">
                                            <span>${item.name}</span></div>
                                            `
                        break;
                    case '厨房用品':
                        e += `
                                        <div class="xianga">
                                            <img width="50" src="${item.img}" alt="">
                                            <span>${item.name}</span></div>
                                            `
                        break;
                    case '厨具水具':
                        f += `
                                        <div class="xianga">
                                            <img width="50" src="${item.img}" alt="">
                                            <span>${item.name}</span></div>
                                            `
                        break;
                    default:
                        g += `
                                        <div class="xianga">
                                            <img width="50" src="${item.img}" alt="">
                                            <span>${item.name}</span></div>
                                            `
                }
            })
            $('#jj').append(str)
            $("#cs").append(a)
            $('#jz').append(b)
            $("#sn").append(c)
            $('#sp').append(d)
            $("#cf").append(e)
            $('#cj').append(f)
            $("#cw").append(g)

        }

        function downLoad(down) {
            $('.app img').attr('src', down.img);
            let str = `<img width="70"  src="${down.img}">
                
            `;

            $asRig.prepend(str)
        }
        $('.close').click(() => {
            $('.aside').remove();
        })

        function bannerImg(banner) {
            let str = ''
            banner.forEach((elem, i) => {
                str += `<img src="${elem.img}" style="left:0" class="pos-absolute" alt="">`
            });
            $('.banner').append(str)
        }
        //li切换轮播
        function bannerActive(elem, elem1) {

            elem.mouseover(function() {
                num = $(this).index();
                $(this).addClass('banner-active').siblings().removeClass('banner-active');
                elem1.eq(num).css('opacity', '1').siblings('img').css('opacity', '0');
            })
        }
        var timer;
        time();
        //自动播放轮播图
        function time() {
            timer = setInterval(() => {
                num++;
                if (num >= $imgs.length) {
                    num = 0
                }
                $lis.eq(num).addClass('banner-active').siblings().removeClass('banner-active');
                $imgs.eq(num).css('opacity', '1').siblings('img').css('opacity', '0');
            }, 2000);
        }
        //移入banner 停止自动播放
        $('.banner').on({
            mouseover: () => {
                clearInterval(timer);
            },
            mouseout: () => {
                time();

            }
        })
        $('.banner-l').click(() => {
            if (num == 0) {
                num = $imgs.length
            }
            num--;
            $lis.eq(num).addClass('banner-active').siblings().removeClass('banner-active');
            $imgs.eq(num).css('opacity', '1').siblings('img').css('opacity', '0');
        })
        $('.banner-r').click(() => {
            if (num == $imgs.length - 1) {
                num = -1
            }
            num++;
            $lis.eq(num).addClass('banner-active').siblings().removeClass('banner-active');
            $imgs.eq(num).css('opacity', '1').siblings('img').css('opacity', '0');
        })
        width = $('.banner ol').width();
        $('.banner ol').css('margin-left', -width / 2);
    </script>
</body>

</html>